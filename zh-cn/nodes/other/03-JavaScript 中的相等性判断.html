<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript 中的相等性判断 | 前端开发</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/my_boke/logo_42x42.png">
    <meta name="description" content="记录前端使用的技术">
    
    <link rel="preload" href="/my_boke/assets/css/0.styles.1dc4f169.css" as="style"><link rel="preload" href="/my_boke/assets/js/app.08abf35f.js" as="script"><link rel="preload" href="/my_boke/assets/js/2.1e45f81f.js" as="script"><link rel="preload" href="/my_boke/assets/js/16.2a08daf9.js" as="script"><link rel="prefetch" href="/my_boke/assets/js/10.a47b0953.js"><link rel="prefetch" href="/my_boke/assets/js/11.d59e539a.js"><link rel="prefetch" href="/my_boke/assets/js/12.5e3f3d52.js"><link rel="prefetch" href="/my_boke/assets/js/13.9be23769.js"><link rel="prefetch" href="/my_boke/assets/js/14.7c82b477.js"><link rel="prefetch" href="/my_boke/assets/js/15.11653181.js"><link rel="prefetch" href="/my_boke/assets/js/3.ce0460f8.js"><link rel="prefetch" href="/my_boke/assets/js/4.25a60dbd.js"><link rel="prefetch" href="/my_boke/assets/js/5.bdbbe150.js"><link rel="prefetch" href="/my_boke/assets/js/6.df535412.js"><link rel="prefetch" href="/my_boke/assets/js/7.8fd82ea2.js"><link rel="prefetch" href="/my_boke/assets/js/8.84fa2730.js"><link rel="prefetch" href="/my_boke/assets/js/9.80764c14.js">
    <link rel="stylesheet" href="/my_boke/assets/css/0.styles.1dc4f169.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/my_boke/" class="home-link router-link-active"><img src="/my_boke/logo_42x42.png" alt="前端开发" class="logo"> <span class="site-name can-hide">前端开发</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记" class="dropdown-title"><span class="title">笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="笔记" class="mobile-dropdown-title"><span class="title">笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my_boke/zh-cn/nodes/other/01-其它笔记.html" class="nav-link">
  随记
</a></li><li class="dropdown-item"><!----> <a href="/my_boke/zh-cn/nodes/js/01-日常开发工具函数.html" class="nav-link">
  JS相关
</a></li><li class="dropdown-item"><!----> <a href="/my_boke/zh-cn/nodes/css/01-日常开发CSS样式类.html" class="nav-link">
  CSS相关
</a></li><li class="dropdown-item"><!----> <a href="/my_boke/zh-cn/nodes/node/" class="nav-link">
  nodejs相关
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue全家桶" class="dropdown-title"><span class="title">Vue全家桶</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue全家桶" class="mobile-dropdown-title"><span class="title">Vue全家桶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my_boke/zh-cn/vue/vue2/" class="nav-link">
  vue2.x
</a></li><li class="dropdown-item"><!----> <a href="/my_boke/zh-cn/vue/router/" class="nav-link">
  vue-router
</a></li><li class="dropdown-item"><!----> <a href="/my_boke/zh-cn/vue/vuex/" class="nav-link">
  vuex
</a></li><li class="dropdown-item"><!----> <a href="/my_boke/zh-cn/vue/axios/" class="nav-link">
  axios
</a></li></ul></div></div><div class="nav-item"><a href="/my_boke/zh-cn/webpack.html" class="nav-link">
  Webpack
</a></div><div class="nav-item"><a href="/my_boke/zh-cn/article/" class="nav-link">
  文章分享
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记" class="dropdown-title"><span class="title">笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="笔记" class="mobile-dropdown-title"><span class="title">笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my_boke/zh-cn/nodes/other/01-其它笔记.html" class="nav-link">
  随记
</a></li><li class="dropdown-item"><!----> <a href="/my_boke/zh-cn/nodes/js/01-日常开发工具函数.html" class="nav-link">
  JS相关
</a></li><li class="dropdown-item"><!----> <a href="/my_boke/zh-cn/nodes/css/01-日常开发CSS样式类.html" class="nav-link">
  CSS相关
</a></li><li class="dropdown-item"><!----> <a href="/my_boke/zh-cn/nodes/node/" class="nav-link">
  nodejs相关
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue全家桶" class="dropdown-title"><span class="title">Vue全家桶</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue全家桶" class="mobile-dropdown-title"><span class="title">Vue全家桶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my_boke/zh-cn/vue/vue2/" class="nav-link">
  vue2.x
</a></li><li class="dropdown-item"><!----> <a href="/my_boke/zh-cn/vue/router/" class="nav-link">
  vue-router
</a></li><li class="dropdown-item"><!----> <a href="/my_boke/zh-cn/vue/vuex/" class="nav-link">
  vuex
</a></li><li class="dropdown-item"><!----> <a href="/my_boke/zh-cn/vue/axios/" class="nav-link">
  axios
</a></li></ul></div></div><div class="nav-item"><a href="/my_boke/zh-cn/webpack.html" class="nav-link">
  Webpack
</a></div><div class="nav-item"><a href="/my_boke/zh-cn/article/" class="nav-link">
  文章分享
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/my_boke/zh-cn/nodes/other/01-其它笔记.html" class="sidebar-link">其它笔记</a><ul class="sidebar-sub-headers is-none"><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/01-其它笔记.html#哈希表" class="sidebar-link">哈希表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/01-其它笔记.html#什么是哈希表" class="sidebar-link">什么是哈希表</a></li><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/01-其它笔记.html#js-模拟实现-hashtable" class="sidebar-link">JS 模拟实现 HashTable</a></li></ul></li><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/01-其它笔记.html#http-请求" class="sidebar-link">HTTP 请求</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/01-其它笔记.html#http-请求状态码" class="sidebar-link">HTTP 请求状态码</a></li><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/01-其它笔记.html#restful-规范及其理解" class="sidebar-link">Restful 规范及其理解</a></li><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/01-其它笔记.html#get-请求-和-post-请求的区别" class="sidebar-link">Get 请求 和 Post 请求的区别</a></li></ul></li></ul></li><li><a href="/my_boke/zh-cn/nodes/other/02-TypeScript.html" class="sidebar-link">TypeScript</a><ul class="sidebar-sub-headers is-none"><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/02-TypeScript.html#typescript是什么" class="sidebar-link">TypeScript是什么</a></li><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/02-TypeScript.html#typescript增加了什么" class="sidebar-link">TypeScript增加了什么</a></li><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/02-TypeScript.html#开发环境搭建" class="sidebar-link">开发环境搭建</a></li><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/02-TypeScript.html#基础类型" class="sidebar-link">基础类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/02-TypeScript.html#类型声明" class="sidebar-link">类型声明</a></li><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/02-TypeScript.html#布尔值" class="sidebar-link">布尔值</a></li><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/02-TypeScript.html#数字" class="sidebar-link">数字</a></li><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/02-TypeScript.html#字符串" class="sidebar-link">字符串</a></li><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/02-TypeScript.html#数组" class="sidebar-link">数组</a></li><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/02-TypeScript.html#元组tuple" class="sidebar-link">元组Tuple</a></li><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/02-TypeScript.html#枚举" class="sidebar-link">枚举</a></li><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/02-TypeScript.html#任意值" class="sidebar-link">任意值</a></li><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/02-TypeScript.html#空值" class="sidebar-link">空值</a></li><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/02-TypeScript.html#null-和-undefined" class="sidebar-link">Null 和 Undefined</a></li><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/02-TypeScript.html#never" class="sidebar-link">Never</a></li><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/02-TypeScript.html#类型断言" class="sidebar-link">类型断言</a></li><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/02-TypeScript.html#关于let" class="sidebar-link">关于let</a></li></ul></li></ul></li><li><a href="/my_boke/zh-cn/nodes/other/03-JavaScript 中的相等性判断.html" class="active sidebar-link">JavaScript 中的相等性判断</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/03-JavaScript 中的相等性判断.html#严格相等" class="sidebar-link">严格相等(===)</a></li><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/03-JavaScript 中的相等性判断.html#非严格相等" class="sidebar-link">非严格相等(==)</a></li><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/03-JavaScript 中的相等性判断.html#同值相等" class="sidebar-link">同值相等</a></li><li class="sidebar-sub-header"><a href="/my_boke/zh-cn/nodes/other/03-JavaScript 中的相等性判断.html#零值相等" class="sidebar-link">零值相等</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javascript-中的相等性判断"><a href="#javascript-中的相等性判断" class="header-anchor">#</a> JavaScript 中的相等性判断</h1> <p>ES2015 中有四种相等算法：</p> <ul><li>抽象（非严格）相等比较 (<code>==</code>)</li> <li>严格相等比较 (<code>===</code>): 用于 <code>Array.prototype.indexOf</code>, <code>Array.prototype.lastIndexOf</code>, 和 <code>case</code>-matching</li> <li>同值零: 用于 <code>%TypedArray%</code> 和 <code>ArrayBuffer</code>构造函数、以及<code>Map</code>和<code>Set</code>操作, 并将用于 ES2016/ES7 中的<code>String.prototype.includes</code></li> <li>同值: 用于所有其他地方</li></ul> <p>JavaScript 提供三种不同的值比较操作：</p> <ul><li>严格相等比较 (也被称作&quot;strict equality&quot;, &quot;identity&quot;, &quot;triple equals&quot;)，使用 <a href="#%E4%B8%A5%E6%A0%BC%E7%9B%B8%E7%AD%89">===</a> ,</li> <li>抽象相等比较 (&quot;loose equality&quot;，&quot;double equals&quot;) ，使用 <a href="#%E9%9D%9E%E4%B8%A5%E6%A0%BC%E7%9B%B8%E7%AD%89">==</a></li> <li>以及 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is" target="_blank" rel="noopener noreferrer"><code>Object.is</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> （ECMAScript 2015/ ES6 新特性）</li></ul> <p>选择使用哪个操作取决于你需要什么样的比较。</p> <p>简而言之，在比较两件事情时，双等号将执行类型转换; 三等号将进行相同的比较，而不进行类型转换 (如果类型不同, 只是总会返回 false ); 而 Object.is 的行为方式与三等号相同，但是对于 NaN 和-0 和+0 进行特殊处理，所以最后两个不相同，而 Object.is（NaN，NaN）将为 <code>true</code>。(通常使用双等号或三等号将 NaN 与 NaN 进行比较，结果为 false，因为 IEEE 754 如是说.) 请注意，所有这些之间的区别都与其处理原语有关; 这三个运算符的原语中，没有一个会比较两个变量是否结构上概念类似。对于任意两个不同的非原始对象，即便他们有相同的结构， 以上三个运算符都会计算得到 false 。</p> <h2 id="严格相等"><a href="#严格相等" class="header-anchor">#</a> 严格相等(===)</h2> <p>全等操作符比较两个值是否相等，两个被比较的值在比较前都不进行隐式转换。如果两个被比较的值具有不同的类型，这两个值是不全等的。否则，如果两个被比较的值类型相同，值也相同，并且都不是 number 类型时，两个值全等。最后，如果两个值都是 number 类型，当两个都不是 NaN，并且数值相同，或是两个值分别为 +0 和 -0 时，两个值被认为是全等的。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">'0'</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token boolean">false</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num <span class="token operator">===</span> num<span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj <span class="token operator">===</span> obj<span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str <span class="token operator">===</span> str<span class="token punctuation">)</span> <span class="token comment">// true</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num <span class="token operator">===</span> obj<span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num <span class="token operator">===</span> str<span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj <span class="token operator">===</span> str<span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div><p>在日常中使用全等操作符几乎总是正确的选择。对于除了数值之外的值，全等操作符使用明确的语义进行比较：一个值只与自身全等。对于数值，全等操作符使用略加修改的语义来处理两个特殊情况：第一个情况是，浮点数 0 是不分正负的。区分 +0 和 -0 在解决一些特定的数学问题时是必要的，但是大部分情况下我们并不用关心。全等操作符认为这两个值是全等的。第二个情况是，浮点数包含了 NaN 值，用来表示某些定义不明确的数学问题的解，例如：正无穷加负无穷。全等操作符认为 NaN 与其他任何值都不全等，包括它自己。（等式 (x !== x) 成立的唯一情况是 x 的值为 NaN）</p> <h2 id="非严格相等"><a href="#非严格相等" class="header-anchor">#</a> 非严格相等(==)</h2> <p>相等操作符比较两个值是否相等，在比较前将两个被比较的值转换为相同类型。在转换后（等式的一边或两边都可能被转换），最终的比较方式等同于全等操作符 === 的比较方式。 相等操作符满足交换律。</p> <p>相等操作符对于不同类型的值，进行的比较如下图所示：</p> <p><img src="/xdxpd.JPG" alt="非严格相等"></p> <p>在上面的表格中，<code>ToNumber(A)</code> 尝试在比较前将参数 A 转换为数字，这与 +A（单目运算符+）的效果相同。<code>ToPrimitive(A)</code>通过尝试调用 A 的<code>A.toString()</code> 和 <code>A.valueOf()</code> 方法，将参数 A 转换为原始值（Primitive）。</p> <p>一般而言，根据 ECMAScript 规范，所有的对象都与 <code>undefined</code>和 <code>null</code>不相等。但是大部分浏览器允许非常窄的一类对象（即，所有页面中的 <code>document.all</code>对象），在某些情况下，充当效仿 <code>undefined</code>的角色。相等操作符就是在这样的一个背景下。因此，<code>IsFalsy(A)</code>方法的值为 <code>true</code>，当且仅当 <code>A</code>效仿 <code>undefined</code>。在其他所有情况下，一个对象都不会等于 <code>undefined</code>或 <code>null</code>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">'0'</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token boolean">false</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num <span class="token operator">==</span> num<span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj <span class="token operator">==</span> obj<span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str <span class="token operator">==</span> str<span class="token punctuation">)</span> <span class="token comment">// true</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num <span class="token operator">==</span> obj<span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num <span class="token operator">==</span> str<span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj <span class="token operator">==</span> str<span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token comment">// true</span>

<span class="token comment">// both false, except in rare cases</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj <span class="token operator">==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span>
</code></pre></div><p>有些开发者认为，最好永远都不要使用相等操作符。全等操作符的结果更容易预测，并且因为没有隐式转换，全等比较的操作会更快。</p> <h2 id="同值相等"><a href="#同值相等" class="header-anchor">#</a> 同值相等</h2> <p>同值相等解决了最后一个用例：确定两个值是否在任何情况下功能上是相同的。（这个用例演示了<a href="http://zh.wikipedia.org/zh-cn/%E9%87%8C%E6%B0%8F%E6%9B%BF%E6%8D%A2%E5%8E%9F%E5%88%99" target="_blank" rel="noopener noreferrer">里氏替换原则<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的实例。）当试图对不可变（immutable）属性修改时发生出现的情况：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 向 Nmuber 构造函数添加一个不可变的属性 NEGATIVE_ZERO</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>Number<span class="token punctuation">,</span> <span class="token string">'NEGATIVE_ZERO'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">,</span> writable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> configurable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> enumerable<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">attemptMutation</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>Number<span class="token punctuation">,</span> <span class="token string">'NEGATIVE_ZERO'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> v <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>Object.defineProperty</code> 在试图修改不可变属性时，如果这个属性确实被修改了则会抛出异常，反之什么都不会发生。例如如果 v 是 -0 ，那么没有发生任何变化，所以也不会抛出任何异常。但如果 v 是 +0 ，则会抛出异常。不可变属性和新设定的值使用 same-value 相等比较。</p> <p>同值相等由 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is" target="_blank" rel="noopener noreferrer"><code>Object.is</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 方法提供。</p> <h2 id="零值相等"><a href="#零值相等" class="header-anchor">#</a> 零值相等</h2> <p>与同值相等类似，不过会认为 +0 与 -0 相等。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/my_boke/zh-cn/nodes/other/02-TypeScript.html" class="prev">
        TypeScript
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/my_boke/assets/js/app.08abf35f.js" defer></script><script src="/my_boke/assets/js/2.1e45f81f.js" defer></script><script src="/my_boke/assets/js/16.2a08daf9.js" defer></script>
  </body>
</html>
